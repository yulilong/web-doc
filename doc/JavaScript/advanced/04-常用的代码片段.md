[TOC]

## 1. document

### 1.1 自动点击按钮

```html
<div id="one">1234</div>
<script>
    var div = document.getElementById('one');   //获取元素div
    div.onclick = function(){   //给元素增加点击事件
        console.log('我被点击了')
    };
    div.click();
</script>
```

### 1.2 HTML加载完毕再执行JS

```javascript
window.onload=function (){
    console.log("页面加载完毕");
}
```

### 1.3 JS设置div高度、最小高度

```html
<style>
    .one { border: 1px solid red; }
</style>
<div class="one"> 1111 </div>
<script>
    var one = document.querySelector(".one")
    one.style.height = "100px";
    one.style.minHeight = "200px"
</script>
```

### 1.4 JS实现页面跳转

```html
<input type="button" onclick="new_page()" value="在新窗口打开s"/> 
<input type="button" onclick="old_page()" value="跳转后有后退功能"/> 
<input type="button" onclick="replace()" value="跳转后没有后退功能"/> 
<script language="javascript">
    function old_page()  {  window.location = "about.html" } 
    function replace()  {  window.location.replace("about.html")  } 
    function new_page()  {  window.open("about.html")  } 
    // window.history.back(-1);	返回上一页 返回两个页面: history.go(-2); 
    // window.history.go(-1)；
    // window.navigate("xx.jsp"); 
    // self.location='xx.htm';  self:当前窗口对象（如果是在iframe里，则为该框架的窗口对象）
    // 第一种：直接跳转加参数
    // window.location.href="login.jsp?backurl="+window.location.href; 
    // 
</script> 
<script>window.location.href='http://www.baidu.com';</script>
```

window.location 属性是兼容所有浏览器的。因此在实现页面跳转的时候这个比较常用。

window.navigate("http://xx.html/") 这个方法是只针对IE的，不适用于火狐等其他浏览器，在HTML DOM Window Object中，根本没有列出window.navigate这个方法，所以这个方法尽量少用。 



### 1.5 事件委托指定子节点才出发事件

现在给一个场景 ul > li > div > p，div占满li，p占满div，还是给ul绑定时间，需要判断点击的是不是li

```html
<ul id="test">
    <li>
        <p>11111111111</p>
    </li>
    <li>
        <div>
            22222222
        </div>
    </li>
    <li>
        <span>3333333333</span>
    </li>
    <li>4444444</li>
</ul>
```

如上列表，有4个li，里面的内容各不相同，点击li，event对象肯定是当前点击的对象，怎么指定到li上，下面我直接给解决方案：

```javascript
var oUl = document.getElementById('test');
oUl.addEventListener('click',function(ev){
    var target = ev.target;
    while(target !== oUl ){
        if(target.tagName.toLowerCase() == 'li'){
            console.log('li click~');
            break;
        }
        target = target.parentNode;
    }
})
```

参考资料：https://www.cnblogs.com/liugang-vip/p/5616484.html

### 1.6 获取浏览器窗口宽度

```javascript
//浏览器窗口的宽度
  getClientWidth(){
    var clientWidth = 0, bodyClientWidth = 0, documentClientWidth = 0;
    if(document.body){ bodyClientWidth = document.body.clientWidth; }
    if(document.documentElement){
      documentClientWidth = document.documentElement.clientWidth;
    }
    clientWidth = (bodyClientWidth - documentClientWidth > 0) ? bodyClientWidth : documentClientWidth;
    return clientWidth;
  }
```

### 1.7 文档的总高度(页面内容的总高度)

```javascript
//文档的总高度
  getScrollHeight: function(){
    var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;
    if(document.body){ bodyScrollHeight = document.body.scrollHeight; }
    if(document.documentElement){
      documentScrollHeight = document.documentElement.scrollHeight;
    }
    scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
    return scrollHeight;
  }
```



### 1.8 获取浏览器可见部分的高度

```javascript
// 获取浏览器可见部分的高度
  getWindowHeight: function() {
    var windowHeight = 0;
    if(document.compatMode == "CSS1Compat"){
      windowHeight = document.documentElement.clientHeight;
    }else{ 
      windowHeight = document.body.clientHeight; 
    }
      return windowHeight;
  }
```



### 1.9 页面已经滚动了多少距离

```javascript
getScrollTop: function (){
    var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;
    if(document.body){ bodyScrollTop = document.body.scrollTop; }
    if(document.documentElement){
      documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
  }
```

### 1.10 获取URL上的参数,解决参数中文乱码

```javascript
function getParams(name) {
    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
    // decodeURI就是解决中文乱码问题的
    var r = decodeURI(window.location.search).substr(1).match(reg);
    if (r != null) {
        return unescape(r[2]);
    }
    return null;
}
var message = getParams('message');

// chorme浏览器调试工具，
// https://www.baidu.com/?aa=baladadasjj%E5%B7%B4%E6%8B%89&bb=dsadadada
```



## 2. JavaScript 相关

### 2.1 获取对象中key，做相关操作

```javascript
var obj = {a: 5, b: 10, x:null, y: undefined, z: 'tt'}
let key;
for (key in obj) { console.log(key,obj[key]) }
// 把所有空值变成 '-'
for (key in obj) { if (!obj[key]) obj[key] = '-' }
console.log(obj)
```

### 2.2 数字千分位格式化:toLocaleString()

```javascript
var num = 123456789456465132;
num.toLocaleString();	// "123,456,789,456,465,000"
var num1 = 1234567894562.2256;
num1.toLocaleString();	// "1,234,567,894,562.23"
```

### 2.3 阻止事件冒泡

```javascript
// 阻止事件冒泡
function stopHandler(e){  
    // 如果提供了事件对象，则这是一个非IE浏览器
    if ( e && e.stopPropagation ) {
        // 因此它支持W3C的stopPropagation()方法
        e.stopPropagation();
    } else {
        // 否则，我们需要使用IE的方式来取消事件冒泡
        window.event.cancelBubble = true;
    }
}  
```

### 2.4 阻止浏览器的默认行为

```javascript
function stopDefault( e ) {
    //阻止默认浏览器动作(W3C)
    if ( e && e.preventDefault )
        e.preventDefault();
    //IE中阻止函数器默认动作的方式
    else
        window.event.returnValue = false;
    return false;
}
```





## 其他参考资料

### 1. [javaScript & jquery完美判断图片是否加载完毕](http://www.cnblogs.com/chenyanger/p/3958656.html)

### 2. [分享前端开发常用代码片段](https://segmentfault.com/a/1190000014700549)

### 3. [前端简洁并实用的工具类](https://segmentfault.com/a/1190000013438501)

